<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper	namespace="com.moa.youthpolicy.admin.mapper.AdminMapper">
	<select id="getTotalCount" resultType="int">
		SELECT COUNT(Email) FROM user
		WHERE userType=1
	</select>

	<select id="getCommentTotalCount" resultType="int">
		SELECT COUNT(tc.cno) 
		FROM tipboardcomments tc
		INNER JOIN commentsreport cr ON tc.cno = cr.tipcno;
	</select>

	<select id="getListWithPaging" resultType="UserVO" parameterType="com.moa.youthpolicy.common.Criteria">
		SELECT * FROM user
		WHERE userType=1
		<!--  
		<if test="writer != null and writer != ''">
			And writer = #{writer}

		</if>
	    <if test="type != null and keyword != null and keyword != ''">
	        <choose>
	            <when test='type == "TC"'>
	                AND (title LIKE CONCAT('%', #{keyword}, '%') OR content LIKE CONCAT('%', #{keyword}, '%'))
	            </when>
	            <when test='type == "T"'>
	                AND title LIKE CONCAT('%', #{keyword}, '%')
	            </when>
	            <when test='type == "W"'>
	                AND writer LIKE CONCAT('%', #{keyword}, '%')
	            </when>
	        </choose>
	    </if>
	    <if test="rgnSeNm != null and rgnSeNm != ''">
	        AND region LIKE CONCAT('%', #{rgnSeNm}, '%')
	    </if>
	    <if test="policyTypeNm != null and policyTypeNm != ''">
	        AND category LIKE CONCAT('%', #{policyTypeNm}, '%')
	    </if>
		-->
		ORDER BY regDate DESC
		<!--  
	    <choose>
	        <when test="selectedFilter == 'like'">
	            `like` DESC, bno DESC
	        </when>
	        <otherwise>
	            bno DESC
	        </otherwise>
	    </choose>	
	    -->	
		LIMIT #{start}, #{amount}
	</select>
	
	<select id="commentListPaging" resultType="CommunityCommentVO" parameterType="com.moa.youthpolicy.common.Criteria">
	    SELECT tc.* 
	    FROM tipboardcomments tc
	    INNER JOIN commentsreport cr ON tc.cno = cr.tipcno
	    ORDER BY tc.regDate DESC
	    LIMIT #{start}, #{amount};
	</select>
	
</mapper>